{# If returned from HTMX endpoints, allow optional wrapper #}
{% if wrap %}<li id="cat-item-{{ c.id }}" class="list-group-item cat-item">{% endif %}

<div class="d-flex justify-content-between align-items-center">
  <!-- Left: icon and name -->
  <div class="cat-name">
    <div class="cat-icon cat-icon-{{ (loop.index0 % 8) + 1 if loop else (c.id % 8) + 1 }}">
      {% if 'food' in c.name|lower %}
        <i class="bi bi-basket text-white"></i>
      {% elif 'travel' in c.name|lower %}
        <i class="bi bi-airplane text-white"></i>
      {% elif 'health' in c.name|lower %}
        <i class="bi bi-heart-pulse text-white"></i>
      {% elif 'rent' in c.name|lower or 'home' in c.name|lower %}
        <i class="bi bi-house text-white"></i>
      {% elif 'salary' in c.name|lower or 'income' in c.name|lower %}
        <i class="bi bi-cash-stack text-white"></i>
      {% elif 'coffee' in c.name|lower or 'tea' in c.name|lower %}
        <i class="bi bi-cup-hot text-white"></i>
      {% elif 'gas' in c.name|lower or 'fuel' in c.name|lower %}
        <i class="bi bi-fuel-pump text-white"></i>
      {% elif 'cinema' in c.name|lower or 'movie' in c.name|lower %}
        <i class="bi bi-film text-white"></i>
      {% elif 'book' in c.name|lower %}
        <i class="bi bi-book text-white"></i>
      {% elif 'game' in c.name|lower %}
        <i class="bi bi-controller text-white"></i>
      {% elif 'credit' in c.name|lower or 'card' in c.name|lower %}
        <i class="bi bi-credit-card text-white"></i>
      {% elif 'social' in c.name|lower %}
        <i class="bi bi-people text-white"></i>
      {% elif 'vet' in c.name|lower or 'pet' in c.name|lower %}
        <i class="bi bi-heart text-white"></i>
      {% else %}
        <i class="bi bi-tag text-white"></i>
      {% endif %}
    </div>
    <span>{{ c.name }}</span>
  </div>

  <!-- Right: actions -->
  <div class="cat-actions">
    <span class="htmx-indicator text-muted small">Savingâ€¦</span>

    <button
      type="button"
      class="btn btn-outline-primary btn-sm"
      hx-get="/categories/edit/{{ c.id }}"
      hx-target="#cat-item-{{ c.id }}"
      hx-swap="outerHTML"
      aria-label="Edit {{ c.name }}"
    >
      <i class="bi bi-pencil"></i> Edit
    </button>

    <button
      type="button"
      class="btn btn-outline-danger btn-sm"
      hx-post="/categories/delete/{{ c.id }}"
      hx-target="#cat-list"
      hx-swap="innerHTML"
      hx-confirm="Are you sure you want to delete '{{ c.name }}'? This cannot be undone."
      hx-on::after-request="updateCategoryCount()"
      aria-label="Delete {{ c.name }}"
    >
      <i class="bi bi-trash"></i> Delete
    </button>
  </div>
</div>

{% if wrap %}</li>{% endif %}