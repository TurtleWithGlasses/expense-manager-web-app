{% extends "base.html" %}
{% block content %}

<h1 class="h1">Entries</h1>

<!-- Add / inline form row -->
<div class="card pad mt-4">
  <form class="row"
        id="entry-add-form"
        hx-post="/entries/create"
        hx-target="#entries-list"
        hx-swap="innerHTML"
        hx-disabled-elt="button">

    <div>
      <label class="muted">Type</label><br>
      <select name="type" class="input" required>
        <option value="expense">Expense</option>
        <option value="income">Income</option>
      </select>
    </div>

    <div>
      <label class="muted">Amount</label><br>
      <input name="amount" type="number" step="0.01" class="input" required placeholder="Amount">
    </div>

    <div>
      <label class="muted">Category</label><br>
      <select name="category_id" class="input">
        <option value="">(No category)</option>
        {% for c in categories %}
          <option value="{{ c.id }}">{{ c.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div>
      <label class="muted">Date</label><br>
      <input name="date" type="date" class="input" value="{{ (now or none) or '' }}">
    </div>

    <div class="flex-1" style="min-width:220px">
      <label class="muted">Note</label><br>
      <input name="note" type="text" class="input" placeholder="Optional note">
    </div>

    <div class="actions">
      <button type="submit" class="btn green">Add</button>
      <span class="htmx-indicator muted">Savingâ€¦</span>
    </div>
  </form>
</div>

<!-- List -->
<div class="card pad mt-4">
  <table class="table">
    <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Amount</th>
        <th>Category</th>
        <th>Note</th>
        <th></th>
      </tr>
    </thead>

    <!-- tbody is the swap target for list refreshes -->
    <tbody id="entries-list">
      {% include "entries/_list.html" %}
    </tbody>
  </table>
</div>

{% endblock %}
