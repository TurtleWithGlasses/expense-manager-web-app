{% extends "base.html" %}
{% block content %}

<h1 class="h1 mb-3">Entries</h1>

<!-- Improved Add form with better styling -->
<div class="card bg-gradient mb-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
  <div class="card-body">
    <h5 class="text-white mb-3">Add New Entry</h5>
    <form
      id="entry-add-form"
      class="row g-3 align-items-end"
      hx-post="/entries/create"
      hx-target="#entries-tbody"
      hx-swap="innerHTML"
      hx-disabled-elt="button">

      <!-- Type -->
      <div class="col-12 col-md-2">
        <label class="form-label text-white-50 small">Type</label>
        <select name="type" class="form-select form-select-lg shadow-sm" required>
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
      </div>

      <!-- Amount -->
      <div class="col-12 col-md-2">
        <label class="form-label text-white-50 small">Amount</label>
        <input name="amount" type="number" step="0.01" 
               class="form-control form-control-lg shadow-sm" 
               placeholder="0.00" required>
      </div>

      <!-- Category -->
      <div class="col-12 col-md-3">
        <label class="form-label text-white-50 small">Category</label>
        <select name="category_id" class="form-select form-select-lg shadow-sm">
          <option value="">(No category)</option>
          {% for c in categories %}
            <option value="{{ c.id }}">{{ c.name }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Date -->
      <div class="col-12 col-md-2">
        <label class="form-label text-white-50 small">Date</label>
        <input name="date_str" type="date" 
               class="form-control form-control-lg shadow-sm" 
               value="{{ today }}" required>
      </div>

      <!-- Note & submit -->
      <div class="col-12 col-md-3">
        <label class="form-label text-white-50 small">Note</label>
        <div class="d-flex gap-2">
          <input name="note" type="text" 
                 class="form-control form-control-lg shadow-sm" 
                 placeholder="Optional note">
          <button type="submit" class="btn btn-success btn-lg shadow">
            <i class="bi bi-plus-circle"></i> Add
          </button>
        </div>
        <small class="htmx-indicator text-white-50">Savingâ€¦</small>
      </div>
    </form>
  </div>
</div>

<!-- Table list with improved styling -->
<div class="card shadow">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-dark table-hover table-borderless align-middle mb-0">
        <thead class="table-secondary">
          <tr>
            <th style="width:14%">Date</th>
            <th style="width:14%">Type</th>
            <th style="width:14%">Amount</th>
            <th style="width:18%">Category</th>
            <th>Note</th>
            <th class="text-end" style="width:18%">Actions</th>
          </tr>
        </thead>
        <tbody id="entries-tbody">
          {% include "entries/_list.html" %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Add custom styles -->
<style>
  /* Form improvements */
  .bg-gradient {
    border: none;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  }
  
  .form-control:focus, .form-select:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
  }
  
  .form-control, .form-select {
    background-color: rgba(255, 255, 255, 0.95);
    border: 2px solid transparent;
    transition: all 0.3s ease;
  }
  
  .form-control:hover, .form-select:hover {
    background-color: white;
    border-color: #667eea;
  }

  /* Table text improvements for better readability */
  .table-dark td {
    color: #e2e8f0 !important;
  }
  
  .table-dark .text-body {
    color: #e2e8f0 !important;
  }
  
  .table-dark .text-secondary {
    color: #9ca3af !important;
  }
  
  /* Expense/Income color coding */
  .expense-type {
    color: #ef4444 !important;
    font-weight: 500;
  }
  
  .income-type {
    color: #10b981 !important;
    font-weight: 500;
  }
  
  .expense-amount {
    color: #fca5a5 !important;
  }
  
  .income-amount {
    color: #86efac !important;
  }

  /* Badge styles for type */
  .type-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 0.375rem;
    font-size: 0.875rem;
    font-weight: 600;
    display: inline-block;
  }
  
  .type-badge.expense {
    background-color: rgba(239, 68, 68, 0.1);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.2);
  }
  
  .type-badge.income {
    background-color: rgba(16, 185, 129, 0.1);
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.2);
  }

  /* Button improvements */
  .btn-success {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    border: none;
  }
  
  .btn-success:hover {
    background: linear-gradient(135deg, #059669 0%, #047857 100%);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
  }

  /* Edit row styling */
  .bg-dark-subtle {
    background-color: rgba(255, 255, 255, 0.05) !important;
  }
  
  .bg-dark-subtle .form-control,
  .bg-dark-subtle .form-select {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e2e8f0;
  }
  
  .bg-dark-subtle .form-control:focus,
  .bg-dark-subtle .form-select:focus {
    background-color: rgba(255, 255, 255, 0.15);
    border-color: #10b981;
    box-shadow: 0 0 0 0.2rem rgba(16, 185, 129, 0.25);
    color: #e2e8f0;
  }
  
  .bg-dark-subtle .form-control::placeholder {
    color: #9ca3af;
  }
</style>

{% endblock %}